

<script type="text/javascript">
    window.addEventListener('uvLoaded', function(e) {
        urlDataProvider = new UV.URLDataProvider(true);
        var formattedLocales;
        var locales = urlDataProvider.get('locales', '');

        if (locales) {
            var names = locales.split(',');
            formattedLocales = [];

            for (var i in names) {
                var nameparts = String(names[i]).split(':');
                formattedLocales[i] = {name: nameparts[0], label: nameparts[1]};
            }

        } else {
            formattedLocales = [
                {
                    name: 'en-GB'
                }
            ]
        }

        uv = createUV('#uv', {
            root: '.',
            iiifResourceUri: urlDataProvider.get('manifest'),
            configUri: urlDataProvider.get('config'),
            collectionIndex: Number(urlDataProvider.get('c', 0)),
            manifestIndex: Number(urlDataProvider.get('m', 0)),
            sequenceIndex: Number(urlDataProvider.get('s', 0)),
            canvasIndex: Number(urlDataProvider.get('cv', 0)),
            rangeId: urlDataProvider.get('rid', 0),
            rotation: Number(urlDataProvider.get('r', 0)),
            xywh: urlDataProvider.get('xywh', ''),
            embedded: true,
            locales: formattedLocales
        }, urlDataProvider);
    }, false);
</script>

<%= t('colenda.static.homepage.blurb_html', :institution_link => link_to(t('colenda.static.homepage.institution_link_text'), t('colenda.static.homepage.institution_link_href')), :public_domain_link => link_to(t('colenda.static.homepage.public_domain_link_text'), t('colenda.static.homepage.public_domain_link_href')), :undetermined_copyright_link => link_to(t('colenda.static.homepage.undetermined_copyright_link_text'), t('colenda.static.homepage.undetermined_copyright_link_href'))) %>

<%= t('colenda.static.homepage.beta_html') %>

<%= t('colenda.static.homepage.featured_title_html') %>
<ul class="bxslider">
  <%= render_featured_list %>
</ul>
